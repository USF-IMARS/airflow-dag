<graph id="mosaic_1km_IMaRS">
<version>1.0</version>
<node id="MosaicNode_OC">
<operator>Mosaic</operator>
<sources>
<sourceProducts>${sourceProducts}</sourceProducts>
</sources>
<parameters>
<variables>
<variable>
<name>Rrs_412</name>
<expression>Rrs_412</expression>
</variable>
<variable>
<name>Rrs_443</name>
<expression>Rrs_443</expression>
</variable>
<variable>
<name>Rrs_488</name>
<expression>Rrs_488</expression>
</variable>
<variable>
<name>Rrs_531</name>
<expression>Rrs_531</expression>
</variable>
<variable>
<name>Rrs_547</name>
<expression>Rrs_547</expression>
</variable>
<variable>
<name>Rrs_667</name>
<expression>Rrs_667</expression>
</variable>
<variable>
<name>Rrs_678</name>
<expression>Rrs_678</expression>
</variable>
<variable>
<name>chlor_a</name>
<expression>chlor_a</expression>
</variable>
<variable>
<name>nflh</name>
<expression>nflh</expression>
</variable>
<variable>
<name>adg_443_giop</name>
<expression>adg_443_giop</expression>
</variable>
<variable>
<name>aph_443_giop</name>
<expression>aph_443_giop</expression>
</variable>
<variable>
<name>opp_cbpm2</name>
<expression>opp_cbpm2</expression>
</variable>
<variable>
<name>bbp_s_giop</name>
<expression>bbp_s_giop</expression>
</variable>
<variable>
<name>l2_flags</name>
<expression>l2_flags</expression>
</variable>
</variables>
<conditions>
<condition>
<name>not_LAND</name>
<expression>NOT l2_flags.LAND</expression>
<output>false</output>
</condition>
<condition>
<name>not_HILT</name>
<expression>NOT l2_flags.HILT</expression>
<output>false</output>
</condition>
<condition>
<name>not_CLDICE</name>
<expression>NOT l2_flags.CLDICE</expression>
<output>false</output>
</condition>
<condition>
<name>not_HIGLINT</name>
<expression>NOT l2_flags.HIGLINT</expression>
<output>false</output>
</condition>
<condition>
<name>not_STRAYLIGHT</name>
<expression>NOT l2_flags.STRAYLIGHT</expression>
<output>false</output>
</condition>
</conditions>
<combine>AND</combine>
<crs>
PROJCS["Equidistant_Cylindrical / World Geodetic System 1984", 
GEOGCS["World Geodetic System 1984", 
DATUM["World Geodetic System 1984", 
SPHEROID["WGS 84", 6378137.0, 298.257223563, AUTHORITY["EPSG","7030"]], 
AUTHORITY["EPSG","6326"]], 
PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]], 
UNIT["degree", 0.017453292519943295], 
AXIS["Geodetic longitude", EAST], 
AXIS["Geodetic latitude", NORTH]], 
PROJECTION["Equidistant_Cylindrical"], 
PARAMETER["central_meridian", 0.0], 
PARAMETER["latitude_of_origin", 0.0], 
PARAMETER["standard_parallel_1", 0.0], 
PARAMETER["false_easting", 0.0], 
PARAMETER["false_northing", 0.0], 
UNIT["m", 1.0], 
AXIS["Easting", EAST],
AXIS["Northing", NORTH]] 
</crs>
<orthorectify>false</orthorectify>
<elevationModelName>GETASSE30</elevationModelName>
<resampling>Nearest</resampling>
<westBound>-98.0</westBound>
<northBound>31.0</northBound>
<eastBound>-79.0</eastBound>
<southBound>18.0</southBound>
<pixelSizeX>1011.7</pixelSizeX>
<pixelSizeY>1011.7</pixelSizeY>
</parameters>
</node>
<node id="MosaicNode_PAR">
<operator>Mosaic</operator>
<sources>
<sourceProducts>${sourceProducts}</sourceProducts>
</sources>
<parameters>
<variables>
<variable>
<name>par</name>
<expression>par</expression>
</variable>
</variables>
<conditions>
<condition>
<name>not_NAVFAIL</name>
<expression>NOT l2_flags.NAVFAIL</expression>
<output>false</output>
</condition>
<condition>
<name>not_HIGLINT</name>
<expression>NOT l2_flags.HIGLINT</expression>
<output>false</output>
</condition>
<condition>
<name>not_FILTER</name>
<expression>NOT l2_flags.FILTER</expression>
<output>false</output>
</condition>
</conditions>
<combine>AND</combine>
<crs>
PROJCS["Equidistant_Cylindrical / World Geodetic System 1984", 
GEOGCS["World Geodetic System 1984", 
DATUM["World Geodetic System 1984", 
SPHEROID["WGS 84", 6378137.0, 298.257223563, AUTHORITY["EPSG","7030"]], 
AUTHORITY["EPSG","6326"]], 
PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]], 
UNIT["degree", 0.017453292519943295], 
AXIS["Geodetic longitude", EAST], 
AXIS["Geodetic latitude", NORTH]], 
PROJECTION["Equidistant_Cylindrical"], 
PARAMETER["central_meridian", 0.0], 
PARAMETER["latitude_of_origin", 0.0], 
PARAMETER["standard_parallel_1", 0.0], 
PARAMETER["false_easting", 0.0], 
PARAMETER["false_northing", 0.0], 
UNIT["m", 1.0], 
AXIS["Easting", EAST],
AXIS["Northing", NORTH]] 
</crs>
<orthorectify>false</orthorectify>
<elevationModelName>GETASSE30</elevationModelName>
<resampling>Nearest</resampling>
<westBound>-98.0</westBound>
<northBound>31.0</northBound>
<eastBound>-79.0</eastBound>
<southBound>18.0</southBound>
<pixelSizeX>1011.7</pixelSizeX>
<pixelSizeY>1011.7</pixelSizeY>
</parameters>
</node>
<node id="BandMergeNode">
<operator>BandMerge</operator>
<sources>
<sourceProduct refid="MosaicNode_OC"/>
<sourceProduct1 refid="MosaicNode_PAR"/>
</sources>
<parameters class="com.bc.ceres.binding.dom.XppDomElement">
<geographicError>1.0E-5</geographicError>
</parameters>
</node>
<node id="selectBandsNode">
    <operator>BandMaths</operator>
    	<sources>
           <sourceProducts>BandMergeNode</sourceProducts>
       </sources>
       <parameters>
           <targetBands>              
               <targetBand>
                   <name>Rrs_412</name>
                   <expression>Rrs_412</expression>
                   <description>Remote sensing reflectance at 412 nm</description>
                   <type>float32</type>
                   <validExpression>(Rrs_412 > -0.01 and Rrs_412 &lt; 0.1 and Rrs_412 != 0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <spectralWavelength>412.0</spectralWavelength>
                   <unit>sr^-1</unit> 
               </targetBand>
               <targetBand>
                   <name>Rrs_443</name>
                   <expression>Rrs_443</expression>
                   <description>Remote sensing reflectance at 443 nm</description>
                   <type>float32</type>
                   <validExpression>(Rrs_443 > -0.01 and Rrs_443 &lt; 0.1 and Rrs_443 != 0</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <spectralWavelength>443.0</spectralWavelength>
                   <unit>sr^-1</unit> 
               </targetBand>
               <targetBand>
                   <name>Rrs_488</name>
                   <expression>Rrs_488</expression>
                   <description>Remote sensing reflectance at 488 nm</description>
                   <type>float32</type>
                   <validExpression>(Rrs_488 > -0.01 and Rrs_488 &lt; 0.1 and Rrs_488 !=0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <spectralWavelength>488.0</spectralWavelength>
                   <unit>sr^-1</unit> 
               </targetBand>
               <targetBand>
                   <name>Rrs_531</name>
                   <expression>Rrs_531</expression>
                   <description>Remote sensing reflectance at 531 nm</description>
                   <type>float32</type>
                   <validExpression>(Rrs_531 > -0.01 and Rrs_531 &lt; 0.01 and Rrs_531 !=0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <spectralWavelength>531.0</spectralWavelength>
                   <unit>sr^-1</unit> 
                </targetBand>
                <targetBand>
                   <name>Rrs_547</name>
                   <expression>Rrs_547</expression>
                   <description>Remote sensing reflectance at 547 nm</description>
                   <type>float32</type>
                   <validExpression>(Rrs_547 > -0.01 and Rrs_547 &lt; 0.01 and Rrs_547 !=0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <spectralWavelength>547.0</spectralWavelength>
                   <unit>sr^-1</unit> 
                </targetBand>
                <targetBand>
                   <name>Rrs_667</name>
                   <expression>Rrs_667</expression>
                   <description>Remote sensing reflectance at 667 nm</description>
                   <type>float32</type>
                   <validExpression>(Rrs_667 > -0.01 and Rrs_667 &lt; 0.01 and Rrs_667 !=0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <spectralWavelength>667.0</spectralWavelength>
                   <unit>sr^-1</unit> 
                </targetBand>
                <targetBand>
                   <name>Rrs_678</name>
                   <expression>Rrs_678</expression>
                   <description>Remote sensing reflectance at 678 nm</description>
                   <type>float32</type>
                   <validExpression>(Rrs_678 > -0.01 and Rrs_678 &lt; 0.01 and Rrs_678 !=0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <spectralWavelength>678.0</spectralWavelength>
                   <unit>sr^-1</unit> 
                </targetBand>
                <targetBand>
                   <name>chlor_a</name>
                   <expression>chlor_a</expression>
                   <description>Chlorophyll-a concentration, OCI Algorithm</description>
                   <type>float32</type>
                   <validExpression>(chlor_a > 0.001 and chlor_a &lt; 100)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <unit>mg m^-3</unit>                  
                </targetBand> 
                <targetBand>
                   <name>nflh</name>
                   <expression>nflh</expression>
                   <description>Fluorescent Line Height (normalized)</description>
                   <type>float32</type>
                   <validExpression>(nflh > -0.5 and nflh &lt; 5 and nflh !=0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <unit>W m^-2 um^-1 sr^-1</unit>                  
                </targetBand> 
                <targetBand>
                   <name>par</name>
                   <expression>par</expression>
                   <description>Photosynthetically available radiation</description>
                   <type>float32</type>
                   <validExpression>(par > 0 and par &lt; 130)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <unit>einst m^-2 day^-1</unit>                  
                </targetBand> 
                <targetBand>
                   <name>adg_443_giop</name>
                   <expression>adg_443_giop</expression>
                   <description>Absorption due to detritus and CDOM, GIOP Algorithm</description>
                   <type>float32</type>
                   <validExpression>(adg_443_giop > -0.5 and adg_443_giop &lt; 5 and adg_443_giop != 0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <unit>m^-1</unit>                  
                </targetBand> 
                <targetBand>
                   <name>aph_443_giop</name>
                   <expression>aph_443_giop</expression>
                   <description>Absorption due to phytoplankton, GIOP Algorithm</description>
                   <type>float32</type>
                   <validExpression>(aph_443_giop > -0.5 and aph_443_giop &lt; 5 and aph_443_giop != 0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <unit>m^-1</unit>                  
                </targetBand> 
                <targetBand>
                   <name>bbp_s_giop</name>
                   <expression>bbp_s_giop</expression>
                   <description>Spectral slope of backscatter, GIOP Algorithm</description>
                   <type>float32</type>
                   <validExpression>(bbp_s_giop > -3 and bbp_s_giop &lt; 3 and bbp_s_giop != 0)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <unit>m^-1 nm^-1</unit>                  
                </targetBand> 
                <targetBand>
                   <name>opp_cbpm2</name>
                   <expression>opp_cbpm2</expression>
                   <description>Ocean Primary Productivity, CBPM2 Algorithm</description>
                   <type>float32</type>
                   <validExpression>(opp_cbpm2 > 0 and opp_cbpm2 &lt; 1000)</validExpression>
                   <noDataValue>NaN</noDataValue>
                   <unit>mg C m^-2 day^-1</unit>                  
                </targetBand> 
           </targetBands>
       </parameters>
   </node>
</graph>
